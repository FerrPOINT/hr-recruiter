# üöÄ –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ: Backend Implementation –¥–ª—è Speech-to-Speech

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. **–î–æ—Ä–∞–±–æ—Ç–∫–∞ `/interviews/{id}/start`**
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å request body —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∞–≥–µ–Ω—Ç–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ –≤ ElevenLabs
- ‚úÖ –í–æ–∑–≤—Ä–∞—Ç –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

### 2. **–ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**
- ‚úÖ `/agents` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞–º–∏
- ‚úÖ `/interviews/{id}/voice/webhook` - webhook –æ—Ç ElevenLabs
- ‚úÖ `/user/preferences` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ `/notifications` - —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ `/export/*` - —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ `/analytics/*` - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### 3. **–ù–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö**
- ‚úÖ `Agent` - –º–æ–¥–µ–ª—å –∞–≥–µ–Ω—Ç–∞
- ‚úÖ `UserPreferences` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ `Notification` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ `Interview` –∏ `Position`

## üîß –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏

### **–°–µ—Ä–≤–∏—Å—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
1. `ElevenLabsService` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ElevenLabs API
2. `AgentService` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞–º–∏
3. `VoiceWebhookController` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ webhook'–æ–≤
4. `UserPreferencesService` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### **–õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–∞:**
```java
// 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ –¥–ª—è –ø–æ–∑–∏—Ü–∏–∏
// 2. –ï—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞—Ç—å —á–µ—Ä–µ–∑ ElevenLabs API
// 3. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å prompt —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏
// 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
// 5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î
```

### **Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
```java
// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –æ—Ç ElevenLabs:
// - message: –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞
// - session_start: –Ω–∞—á–∞–ª–æ —Å–µ—Å—Å–∏–∏
// - session_end: –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏
// - error: –æ—à–∏–±–∫–∏
```

## üìä OpenAPI –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è

### **–ù–æ–≤—ã–µ —Å—Ö–µ–º—ã:**
- `InterviewStartRequest/Response`
- `Agent`, `AgentConfig`, `AgentTool`
- `VoiceWebhookRequest/Response`
- `UserPreferences`, `WidgetConfig`
- `Notification`, `ExportRequest/Response`
- `ConversionAnalytics`, `TimeToHireAnalytics`

### **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
- –í—Ä–µ–º—è –¥–æ –Ω–∞–π–º–∞
- –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### **–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
1. ‚úÖ –î–æ—Ä–∞–±–æ—Ç–∫–∞ `/interviews/{id}/start`
2. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ `ElevenLabsService`
3. ‚úÖ Webhook –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
4. ‚úÖ –ú–æ–¥–µ–ª–∏ `Agent` –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `Interview`

### **–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
1. ‚úÖ –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
2. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
3. ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

### **–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
1. ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
2. ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã:**
1. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ ElevenLabs API
2. ‚úÖ Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
3. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∏–Ω—Ç–µ—Ä–≤—å—é
4. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ edge cases

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** —Å–æ–∑–¥–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–≤
2. **–î–æ–±–∞–≤–∏—Ç—å webhook –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π
3. **–†–∞—Å—à–∏—Ä–∏—Ç—å OpenAPI —Å—Ö–µ–º—É** –Ω–æ–≤—ã–º–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é** —Å ElevenLabs
5. **–î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫** –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `info/BACKEND_SPEECH_TO_SPEECH_DEVELOPMENT.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- `api/openapi-extensions.yaml` - –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∫ OpenAPI —Å—Ö–µ–º–µ
- `api/openapi.yaml` - –æ—Å–Ω–æ–≤–Ω–∞—è —Å—Ö–µ–º–∞ API

---

**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ üöÄ 